{% extends "base.html" %}
{% block title %}Create Team{% endblock %}

{% block content %}
<h3 class="mb-3">Create Team</h3>

{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} py-2">{{ message }}</div>
    {% endfor %}
{% endif %}

<p class="mb-3">
    You have {{ accepted_invites_count }} accepted invitations.
</p>

<form method="post">
    {% csrf_token %}

    <div class="mb-3">
        <label class="form-label">Team name</label>
        <input type="text" name="team_name" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Select members (2 or 3 students)</label>
        {% if accepted_invites %}
            {% for invite in accepted_invites %}
                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="checkbox"
                        name="member_ids"
                        value="{{ invite.to_student.id }}"
                        id="member{{ invite.to_student.id }}"
                    >
                    <label class="form-check-label" for="member{{ invite.to_student.id }}">
                        {{ invite.to_student.user.get_full_name|default:invite.to_student.user.username }}
                        ({{ invite.to_student.roll_number }})
                    </label>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">No accepted invitations to choose from.</p>
        {% endif %}
    </div>

    <button type="submit" class="btn btn-primary">Create Team</button>
    <a href="{% url 'student_dashboard' %}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
